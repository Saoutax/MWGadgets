{"version":3,"file":"MassRollback.min.js","mappings":"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","sources":["webpack://mwgadgets/./src/MassRollback/index.js"],"sourcesContent":["\"use strict\";\r\n$.when($.ready, mw.loader.using([\"mediawiki.api\", \"@wikimedia/codex\"])).then(() => {\r\n    if (mw.config.get(\"wgCanonicalSpecialPageName\") !== \"Contributions\") {\r\n        return;\r\n    }\r\n\r\n    async function codexPrompt(messageHtml, { title = \"提示\", required = false } = {}) {\r\n        return new Promise((resolve) => {\r\n            const dialog = document.createElement(\"cdx-dialog\");\r\n            dialog.open = true;\r\n            dialog.setAttribute(\"headline\", title);\r\n            dialog.innerHTML = `\r\n                <div class=\"cdx-dialog__body\">${messageHtml}</div>\r\n                <div class=\"cdx-dialog__footer\">\r\n                    <input id=\"codex-prompt-input\" type=\"text\" class=\"cdx-text-input__input\" style=\"width:100%; margin-bottom:8px;\" placeholder=\"输入内容...\" ${required ? \"required\" : \"\"}>\r\n                    <button class=\"cdx-button cdx-button--action-progressive cdx-button--weight-primary\" id=\"codex-ok\">确定</button>\r\n                    <button class=\"cdx-button cdx-button--action-quiet\" id=\"codex-cancel\">取消</button>\r\n                </div>\r\n            `;\r\n            document.body.appendChild(dialog);\r\n            const input = dialog.querySelector(\"#codex-prompt-input\");\r\n            const ok = dialog.querySelector(\"#codex-ok\");\r\n            const cancel = dialog.querySelector(\"#codex-cancel\");\r\n\r\n            const cleanup = () => dialog.remove();\r\n            ok.addEventListener(\"click\", () => { cleanup(); resolve(input.value || \"\"); });\r\n            cancel.addEventListener(\"click\", () => { cleanup(); resolve(null); });\r\n            input.addEventListener(\"keydown\", (e) => {\r\n                if (e.key === \"Enter\") { cleanup(); resolve(input.value || \"\"); }\r\n            });\r\n        });\r\n    }\r\n\r\n    $(\".mw-contributions-list li\").each(function () {\r\n        const newChk = document.createElement(\"input\");\r\n        newChk.type = \"checkbox\";\r\n        newChk.dataset.title = this.getElementsByClassName(\"mw-contributions-title\")[0].innerText;\r\n        newChk.dataset.revid = this.getAttribute(\"data-mw-revid\");\r\n        this.prepend(newChk);\r\n    });\r\n\r\n    $('div.mw-htmlform-ooui-wrapper').after(`\r\n        <div style=\"float: right; margin: 0.6em 0;\" id=\"mw-history-revision-actions\">\r\n            <button class=\"cdx-button cdx-button--action-progressive\" id=\"mw-checkbox-invert\">全选/反选</button>\r\n            <button class=\"cdx-button cdx-button--action-progressive\" id=\"mw-checkbox-between\" title=\"请勾选需要操作的第一个和最后一个复选框后点击此按钮。\">连选</button>\r\n            <button class=\"cdx-button cdx-button--action-progressive cdx-button--weight-primary\" id=\"contributions-undo-button\">撤销</button>\r\n            <button class=\"cdx-button cdx-button--action-progressive cdx-button--weight-primary patroller-show\" id=\"contributions-rollback-button\" title=\"默认不启用markbotedit权限。\">回退</button>\r\n            <button class=\"cdx-button cdx-button--action-progressive cdx-button--weight-primary patroller-show\" id=\"contributions-flagdelete-button\">挂删</button>\r\n            <button class=\"cdx-button cdx-button--action-progressive cdx-button--weight-primary sysop-show\" id=\"contributions-revdel-button\" title=\"默认仅删除内容和摘要。\">版本删除</button>\r\n        </div>\r\n    `);\r\n\r\n    $(\"#mw-checkbox-invert\").click(() => {\r\n        $(\"li input[type='checkbox']\").prop(\"checked\", (_i, ele) => !ele);\r\n    });\r\n    $(\"#mw-checkbox-between\").click(() => {\r\n        const $checkboxes = $(\".mw-contributions-list li input[type='checkbox']\");\r\n        const firstIndex = $checkboxes.index($checkboxes.filter(\":checked:first\"));\r\n        const lastIndex = $checkboxes.index($checkboxes.filter(\":checked:last\"));\r\n        if (firstIndex === -1 || lastIndex === -1 || firstIndex === lastIndex) return;\r\n        const [start, end] = firstIndex < lastIndex ? [firstIndex, lastIndex] : [lastIndex, firstIndex];\r\n        $checkboxes.slice(start, end + 1).prop(\"checked\", true);\r\n    });\r\n\r\n    const api = new mw.Api();\r\n\r\n    $(\"#contributions-rollback-button\").click(async () => {\r\n        const checked = $(\".mw-contributions-list li :checkbox:checked\");\r\n        const reason = await codexPrompt(\r\n            `<ul>\r\n                <li>选中了${checked.length}个页面</li>\r\n                <li>批量回退操作的编辑摘要：<code>xxx // MassRollback</code></li>\r\n                <li>空白则使用默认回退摘要，取消则不进行回退</li>\r\n            </ul>`,\r\n            { title: \"批量回退小工具\" }\r\n        );\r\n        if (reason === null) return;\r\n\r\n        console.log(\"开始回退...\");\r\n        const user = mw.config.get(\"wgRelevantUserName\");\r\n        checked.each(function () {\r\n            const title = this.dataset.title;\r\n            api.postWithToken(\"rollback\", {\r\n                action: \"rollback\",\r\n                format: \"json\",\r\n                title,\r\n                user,\r\n                markbot: mw.config.get(\"wgUserGroups\").includes(\"sysop\") && \r\n                         (mw.config.get(\"wgUserGroups\").includes(\"flood\") || document.URL.includes(\"bot=1\")),\r\n                watchlist: \"nochange\",\r\n                tags: \"Automation tool\",\r\n                summary: reason ? `${reason} // MassRollback` : \"// MassRollback\",\r\n            }).then((result) => console.log(`回退：${title}\\n${JSON.stringify(result)}`))\r\n              .catch((e) => console.log(`回退失败：${e}`));\r\n        });\r\n    });\r\n\r\n    $(\"#contributions-undo-button\").click(async () => {\r\n        const checked = $(\".mw-contributions-list li :checkbox:checked\");\r\n        const reason = await codexPrompt(\r\n            `<ul>\r\n                <li>选中了${checked.length}个页面</li>\r\n                <li>批量撤销操作的编辑摘要：<code>xxx // MassUndo</code></li>\r\n            </ul>`,\r\n            { title: \"批量撤销小工具\" }\r\n        );\r\n        if (reason === null) return;\r\n\r\n        console.log(\"开始撤销...\");\r\n        checked.each(function () {\r\n            const title = this.dataset.title;\r\n            const revid = this.dataset.revid;\r\n            api.postWithToken(\"csrf\", {\r\n                action: \"edit\",\r\n                format: \"json\",\r\n                title,\r\n                undo: revid,\r\n                tags: \"Automation tool\",\r\n                bot: mw.config.get(\"wgUserGroups\").includes(\"flood\"),\r\n                watchlist: \"nochange\",\r\n                summary: reason ? `${reason} // MassUndo` : \"// MassUndo\",\r\n            }).then((result) => console.log(`撤销：${title}\\n${JSON.stringify(result)}`))\r\n              .catch((e) => console.log(`撤销失败：${e}`));\r\n        });\r\n    });\r\n\r\n    $(\"#contributions-flagdelete-button\").click(async () => {\r\n        const checked = $(\".mw-contributions-list li :checkbox:checked\");\r\n        const username = mw.config.get(\"wgUserName\");\r\n        const reason = await codexPrompt(\r\n            `<ul>\r\n                <li>选中了${checked.length}个页面</li>\r\n                <li>批量挂删操作的编辑摘要：<code>xxx // MassDelete</code></li>\r\n            </ul>`,\r\n            { title: \"批量挂删小工具\" }\r\n        );\r\n        if (reason === null) return;\r\n\r\n        console.log(\"开始挂删...\");\r\n        checked.each(function () {\r\n            const title = this.dataset.title;\r\n            api.postWithToken(\"csrf\", {\r\n                action: \"edit\",\r\n                format: \"json\",\r\n                title,\r\n                text: `<noinclude>{{即将删除|user=${username}|1=${reason}}}</noinclude>`,\r\n                tags: \"Automation tool\",\r\n                bot: mw.config.get(\"wgUserGroups\").includes(\"flood\"),\r\n                watchlist: \"nochange\",\r\n                summary: reason ? `${reason} // MassDelete` : \"// MassDelete\",\r\n            }).then((result) => console.log(`挂删：${title}\\n${JSON.stringify(result)}`))\r\n              .catch((e) => console.log(`挂删失败：${e}`));\r\n        });\r\n    });\r\n\r\n    $(\"#contributions-revdel-button\").click(async () => {\r\n        const checked = $(\".mw-contributions-list li :checkbox:checked\");\r\n        const reason = await codexPrompt(\r\n            `<ul>\r\n                <li>选中了${checked.length}个页面，将删除版本内容和编辑摘要</li>\r\n                <li>批量版本删除原因：<code>xxx // MassRevisionDelete</code></li>\r\n            </ul>`,\r\n            { title: \"批量版本删除小工具\" }\r\n        );\r\n        if (reason === null) return;\r\n\r\n        console.log(\"开始版本删除...\");\r\n        checked.each(function () {\r\n            const title = this.dataset.title;\r\n            const revid = this.dataset.revid;\r\n            api.postWithToken(\"csrf\", {\r\n                action: \"revisiondelete\",\r\n                format: \"json\",\r\n                type: \"revision\",\r\n                target: title,\r\n                ids: revid,\r\n                tags: \"Automation tool\",\r\n                hide: \"comment|content\",\r\n                reason: reason ? `${reason} // MassRevisionDelete` : \"// MassRevisionDelete\",\r\n            }).then((result) => console.log(`版本删除：${title}\\n${JSON.stringify(result)}`))\r\n              .catch((e) => console.log(`版本删除失败：${e}`));\r\n        });\r\n    });\r\n});\r\n"],"names":["_regenerator","e","t","r","Symbol","n","iterator","o","toStringTag","i","c","prototype","Generator","u","Object","create","_regeneratorDefine2","f","p","y","G","v","a","d","bind","length","l","TypeError","call","done","value","GeneratorFunction","GeneratorFunctionPrototype","getPrototypeOf","setPrototypeOf","__proto__","displayName","w","m","defineProperty","_invoke","enumerable","configurable","writable","_slicedToArray","Array","isArray","_arrayWithHoles","next","push","_iterableToArrayLimit","_arrayLikeToArray","toString","slice","constructor","name","from","test","_unsupportedIterableToArray","_nonIterableRest","asyncGeneratorStep","Promise","resolve","then","_asyncToGenerator","arguments","apply","_next","_throw","$","when","ready","mw","loader","using","config","get","each","newChk","document","createElement","type","dataset","title","this","getElementsByClassName","innerText","revid","getAttribute","prepend","after","click","prop","_i","ele","$checkboxes","firstIndex","index","filter","lastIndex","_ref2","start","end","api","Api","_callee","checked","reason","user","_context","codexPrompt","concat","console","log","postWithToken","action","format","markbot","includes","URL","watchlist","tags","summary","result","JSON","stringify","_callee2","_context2","undo","bot","_callee3","username","_context3","text","_callee4","_context4","target","ids","hide","_x","_codexPrompt","_callee5","messageHtml","_ref7","_ref7$title","_ref7$required","required","_args5","_context5","undefined","dialog","open","setAttribute","innerHTML","body","appendChild","input","querySelector","ok","cancel","cleanup","remove","addEventListener","key"],"sourceRoot":""}