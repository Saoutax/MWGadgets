{"version":3,"file":"MassRollback.min.js","mappings":"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","sources":["webpack://mwgadgets/./src/MassRollback/index.js"],"sourcesContent":["/* TODO:\r\n    1.回退/撤销失败的页面给出控制台以外的提示\r\n    2.为管理员回退提供markbot可选框，无需以flood用户组或URL带bot视为开关\r\n    3.可能不需要连选功能，按住shift可自动连选，但移动设备无shift\r\n    4.使用ooui\r\n*/\r\n\"use strict\";\r\n$.when($.ready, mw.loader.using([\"mediawiki.api\", \"ext.gadget.libOOUIDialog\"])).then(() => {\r\n    if (mw.config.get(\"wgCanonicalSpecialPageName\") !== \"Contributions\") {\r\n        return;\r\n    }\r\n\r\n    $(\".mw-contributions-list li\").each(function () {\r\n        const newChk = document.createElement(\"input\");\r\n        newChk.setAttribute(\"type\", \"checkbox\");\r\n        newChk.setAttribute(\"data-title\", this.getElementsByClassName(\"mw-contributions-title\")[0].innerText);\r\n        newChk.setAttribute(\"data-revid\", this.getAttribute(\"data-mw-revid\"));\r\n        this.prepend(newChk);\r\n    });\r\n\r\n    const $actionsDiv = $('<div>', { id: 'mw-history-revision-actions' }).css({ float: 'right', 'margin-bottom': '1em' });\r\n\r\n    const buttonsConfig = [\r\n        { label: '全选/反选', id: 'mw-checkbox-invert' },\r\n        { label: '连选', id: 'mw-checkbox-between', title: '请勾选需要操作的第一个和最后一个复选框后点击此按钮。' },\r\n        { label: '撤销', id: 'contributions-undo-button', classes: ['mw-ui-progressive'] },\r\n        { label: '回退', id: 'contributions-rollback-button', classes: ['mw-ui-progressive', 'patroller-show'], title: '默认不启用markbotedit权限。' },\r\n        { label: '挂删', id: 'contributions-registerdelete-button', classes: ['mw-ui-progressive', 'patroller-show'] },\r\n        { label: '版本删除', id: 'contributions-revdel-button', classes: ['mw-ui-progressive', 'sysop-show'], title: '默认仅删除内容和摘要。' }\r\n    ];\r\n    $actionsDiv.append(\r\n        ...buttonsConfig.map(cfg => new OO.ui.ButtonWidget(cfg).$element)\r\n    );\r\n\r\n    $('div.mw-htmlform-ooui-wrapper.oo-ui-layout.oo-ui-panelLayout.oo-ui-panelLayout-padded.oo-ui-panelLayout-framed').after($actionsDiv);\r\n\r\n    $(\"#mw-checkbox-invert\").click(() => {\r\n        $(\"li input[type=\\\"checkbox\\\"]\").prop(\"checked\", (_i, ele) => !ele);\r\n    });\r\n    $(\"#mw-checkbox-between\").click(() => {\r\n        const $checkboxes = $(\".mw-contributions-list li input[type='checkbox']\");\r\n        const firstIndex = $checkboxes.index($checkboxes.filter(\":checked:first\"));\r\n        const lastIndex = $checkboxes.index($checkboxes.filter(\":checked:last\"));\r\n        if (firstIndex === -1 || lastIndex === -1 || firstIndex === lastIndex) return;\r\n        const [start, end] = firstIndex < lastIndex ? [firstIndex, lastIndex] : [lastIndex, firstIndex];\r\n        $checkboxes.slice(start, end + 1).prop(\"checked\", true);\r\n    });\r\n\r\n    const api = new mw.Api();\r\n\r\n    $(\"#contributions-rollback-button\").click(async () => {\r\n        const checked = $(\".mw-contributions-list li :checkbox:checked\");\r\n        const reason = await oouiDialog.prompt(`<ul><li>选中了${checked.length}个页面</li><li>批量回退操作的编辑摘要：<code>xxx// MassRollback</code></li><li>空白则使用默认回退摘要，取消则不进行回退</li><li>管理员可自授权机器用户或在URL后添加<code>bot=1</code>以启用markbotedit。</li></ul><hr>请输入回退摘要：`, {\r\n            title: \"批量回退小工具\",\r\n            size: \"medium\",\r\n            required: false,\r\n        });\r\n        if (reason === null) { return; }\r\n        console.log(\"开始回退...\");\r\n        const user = mw.config.get(\"wgRelevantUserName\");\r\n        checked.each(function () {\r\n            const title = this.getAttribute(\"data-title\");\r\n            try {\r\n                api.postWithToken(\"rollback\", {\r\n                    action: \"rollback\",\r\n                    format: \"json\",\r\n                    title: title,\r\n                    user: user,\r\n                    markbot: mw.config.get(\"wgUserGroups\").includes(\"sysop\") && (mw.config.get(\"wgUserGroups\").includes(\"flood\") || document.URL.includes(\"bot=1\")),\r\n                    watchlist: \"nochange\",\r\n                    tags: \"Automation tool\",\r\n                    summary: reason ? `${reason} // MassRollback` : \"// MassRollback\",\r\n                }).then((result) => {\r\n                    console.log(`回退：${title}\\n${result}`);\r\n                });\r\n            } catch (e) {\r\n                console.log(`回退失败：${e}` instanceof Error ? e.stack.split(\"\\n\")[1].trim() : JSON.stringify(e));\r\n            }\r\n        });\r\n    });\r\n\r\n    $(\"#contributions-undo-button\").click(async () => {\r\n        const checked = $(\".mw-contributions-list li :checkbox:checked\");\r\n        const reason = await oouiDialog.prompt(`<ul><li>选中了${checked.length}个页面</li><li>批量撤销操作的编辑摘要：<code>xxx// MassUndo</code></li><li>空白则使用默认撤销摘要，取消则不进行撤销</li></ul><hr>请输入撤销摘要：`, {\r\n            title: \"批量撤销小工具\",\r\n            size: \"medium\",\r\n            required: false,\r\n        });\r\n        if (reason === null) { return; }\r\n        console.log(\"开始撤销...\");\r\n        checked.each(function () {\r\n            const title = this.getAttribute(\"data-title\"),\r\n                revid = this.getAttribute(\"data-revid\");\r\n            try {\r\n                api.postWithToken(\"csrf\", {\r\n                    action: \"edit\",\r\n                    format: \"json\",\r\n                    title: title,\r\n                    undo: revid,\r\n                    tags: \"Automation tool\",\r\n                    bot: mw.config.get(\"wgUserGroups\").includes(\"flood\"),\r\n                    watchlist: \"nochange\",\r\n                    summary: reason ? `${reason} // MassUndo` : \"// MassUndo\",\r\n                }).then((result) => {\r\n                    console.log(`撤销：${title}\\n${result}`);\r\n                });\r\n            } catch (e) {\r\n                console.log(`撤销失败：${e}` instanceof Error ? e.stack.split(\"\\n\")[1].trim() : JSON.stringify(e));\r\n            }\r\n        });\r\n    });\r\n\r\n    $(\"#contributions-registerdelete-button\").click(async () => {\r\n        const checked = $(\".mw-contributions-list li :checkbox:checked\");\r\n        const username = mw.config.get(\"wgUserName\");\r\n        const reason = await oouiDialog.prompt(`<ul><li>选中了${checked.length}个页面</li><li>批量挂删操作的编辑摘要：<code>xxx// MassDelete</code></li><li>空白则使用默认摘要，取消则不进行挂删</li></ul><hr>请输入挂删摘要：`, {\r\n            title: \"批量挂删小工具\",\r\n            size: \"medium\",\r\n            required: false,\r\n        });\r\n        if (reason === null) { return; }\r\n        console.log(\"开始挂删...\");\r\n        checked.each(function () {\r\n            const title = this.getAttribute(\"data-title\");\r\n            try {\r\n                api.postWithToken(\"csrf\", {\r\n                    action: \"edit\",\r\n                    format: \"json\",\r\n                    title: title,\r\n                    text: `<noinclude>{{即将删除|user=${username}|1=${reason}}}</noinclude>`,\r\n                    tags: \"Automation tool\",\r\n                    bot: mw.config.get(\"wgUserGroups\").includes(\"flood\"),\r\n                    watchlist: \"nochange\",\r\n                    summary: reason ? `${reason} // MassDelete` : \"// MassDelete\",\r\n                }).then((result) => {\r\n                    console.log(`挂删：${title}\\n${result}`);\r\n                });\r\n            } catch (e) {\r\n                console.log(`挂删失败：${e}` instanceof Error ? e.stack.split(\"\\n\")[1].trim() : JSON.stringify(e));\r\n            }\r\n        });\r\n    });\r\n\r\n    $(\"#contributions-revdel-button\").click(async () => {\r\n        const checked = $(\".mw-contributions-list li :checkbox:checked\");\r\n        const reason = await oouiDialog.prompt(`<ul><li>选中了${checked.length}个页面，将删除版本内容和编辑摘要</li><li>批量版本删除的原因：<code>xxx// MassRevisionDelete</code></li><li>空白则使用默认原因，取消则不进行版本删除</li></ul><hr>请输入版本删除原因：`, {\r\n            title: \"批量版本删除小工具\",\r\n            size: \"medium\",\r\n            required: false,\r\n        });\r\n        if (reason === null) { return; }\r\n        console.log(\"开始版本删除...\");\r\n        checked.each(function () {\r\n            const title = this.getAttribute(\"data-title\"),\r\n                revid = this.getAttribute(\"data-revid\");\r\n            try {\r\n                api.postWithToken(\"csrf\", {\r\n                    action: \"revisiondelete\",\r\n                    format: \"json\",\r\n                    type: \"revision\",\r\n                    target: title,\r\n                    ids: revid,\r\n                    tags: \"Automation tool\",\r\n                    hide: \"comment|content\",\r\n                    reason: reason ? `${reason} // MassRevisionDelete` : \"// MassRevisionDelete\",\r\n                }).then((result) => {\r\n                    console.log(`版本删除：${title}\\n${result}`);\r\n                });\r\n            } catch (e) {\r\n                console.log(`版本删除失败：${e}` instanceof Error ? e.stack.split(\"\\n\")[1].trim() : JSON.stringify(e));\r\n            }\r\n        });\r\n    });\r\n});"],"names":["_regenerator","e","t","r","Symbol","n","iterator","o","toStringTag","i","c","prototype","Generator","u","Object","create","_regeneratorDefine2","f","p","y","G","v","a","d","bind","length","l","TypeError","call","done","value","GeneratorFunction","GeneratorFunctionPrototype","getPrototypeOf","setPrototypeOf","__proto__","displayName","w","m","defineProperty","_invoke","enumerable","configurable","writable","asyncGeneratorStep","Promise","resolve","then","_asyncToGenerator","arguments","apply","_next","_throw","_slicedToArray","Array","isArray","_arrayWithHoles","next","push","_iterableToArrayLimit","_unsupportedIterableToArray","_nonIterableRest","_toConsumableArray","_arrayLikeToArray","_arrayWithoutHoles","from","_iterableToArray","_nonIterableSpread","toString","slice","constructor","name","test","$","when","ready","mw","loader","using","config","get","each","newChk","document","createElement","setAttribute","this","getElementsByClassName","innerText","getAttribute","prepend","$actionsDiv","id","css","float","append","label","title","classes","map","cfg","OO","ui","ButtonWidget","$element","after","click","prop","_i","ele","$checkboxes","firstIndex","index","filter","lastIndex","_ref2","start","end","api","Api","_callee","checked","reason","user","_context","oouiDialog","prompt","concat","size","required","console","log","postWithToken","action","format","markbot","includes","URL","watchlist","tags","summary","result","Error","stack","split","trim","JSON","stringify","_callee2","_context2","revid","undo","bot","_callee3","username","_context3","text","_callee4","_context4","type","target","ids","hide"],"sourceRoot":""}