{"version":3,"file":"UserMessages.min.js","mappings":"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","sources":["webpack://mwgadgets/./src/UserMessages/index.js"],"sourcesContent":["const dialogTrigger = mw.util.addPortletLink(\"p-cactions\", \"#\", \"向用户发送提醒\", \"p-usermessages\");\r\n\r\nmw.loader.using([\"mediawiki.api\", \"@wikimedia/codex\"]).then(function (require) {\r\n\tconst Vue = require(\"vue\");\r\n\tconst Codex = require(\"@wikimedia/codex\");\r\n\tconst mountPoint = document.body.appendChild(document.createElement(\"div\"));\r\n\tconst api = new mw.Api();\r\n\r\n\tmw.util.addCSS(`\r\n\t\t.umdev-dialog-content {\r\n\t\t\tmax-height: 70vh;\r\n\t\t\toverflow-y: auto;\r\n\t\t\tpadding-right: 8px;\r\n\t\t}\r\n\t\t.umdev-textarea textarea {\r\n\t\t\tresize: vertical !important;\r\n\t\t\tmax-height: 400px;\r\n\t\t\toverflow-y: auto !important;\r\n\t\t}\r\n\t`);\r\n\r\n\tVue.createMwApp({\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tshowDialog: false,\r\n\t\t\t\tselected: null,\r\n\t\t\t\teditSummary: \"\",\r\n\t\t\t\tshowPreview: false,\r\n\t\t\t\tpreviewHtml: \"\",\r\n\t\t\t\tpreviewWikitext: \"\",\r\n\t\t\t\tparameterValues: {},\r\n\t\t\t\tcustomMode: false,\r\n\t\t\t\tcustomText: \"\",\r\n\t\t\t\tloadingSource: false,\r\n\t\t\t\tsending: false,\r\n\t\t\t\ttemplates: [\r\n                    {\r\n                        title: \"欢迎\",\r\n                        template: \"Template:UserMessages/Welcome\",\r\n                        parameters: [],\r\n                        summary: \"Welcome to Moegirlpedia~\"\r\n                    },\r\n                    {\r\n                        title: \"优质编辑者\",\r\n                        template: \"Template:UserMessages/GoodEditor\",\r\n                        parameters: [\r\n                            { key: \"1\", label: \"选填原因\" }\r\n                        ],\r\n                        summary: \"恭喜您成为萌娘百科优质编辑者！\"\r\n                    },\r\n                    {\r\n                        title: \"可收录页面打回\",\r\n                        template: \"Template:UserMessages/MovedToUserSubpage\",\r\n                        parameters: [\r\n                            { key: \"1\", label: \"页面名\" },\r\n                            { key: \"2\", label: \"原因\" }\r\n                        ],\r\n                        summary: \"页面打回通知\"\r\n                    },\r\n                    {\r\n                        title: \"非收录页面打回\",\r\n                        template: \"Template:UserMessages/MovedToUserSubpage2\",\r\n                        parameters: [\r\n                            { key: \"1\", label: \"页面名\" },\r\n                            { key: \"2\", label: \"原因\" }\r\n                        ],\r\n                        summary: \"页面打回通知\"\r\n                    },\r\n                    {\r\n                        title: \"著作权侵犯\",\r\n                        template: \"Template:UserMessages/ArticleCopyright\",\r\n                        parameters: [\r\n                            { key: \"1\", label: \"页面名\" },\r\n                            { key: \"2\", label: \"选填站点\" }\r\n                        ],\r\n                        summary: \"请勿侵犯著作权\"\r\n                    },\r\n                    {\r\n                        title: \"不实信息\",\r\n                        template: \"Template:UserMessages/FalseInformation\",\r\n                        parameters: [\r\n                            { key: \"1\", label: \"页面名\" }\r\n                        ],\r\n                        summary: \"请勿添加不实信息\"\r\n                    },\r\n                    {\r\n                        title: \"Wiki语法\",\r\n                        template: \"Template:UserMessages/WikiMarkupLanguage\",\r\n                        parameters: [],\r\n                        summary: \"关于Wiki语法\"\r\n                    },\r\n                    {\r\n                        title: \"剪贴移动\",\r\n                        template: \"Template:UserMessages/CutAndPasteMoving\",\r\n                        parameters: [\r\n                            { key: \"1\", label: \"页面名\" }\r\n                        ],\r\n                        summary: \"请勿剪切移动页面\"\r\n                    },\r\n                    {\r\n                        title: \"编辑用户页\",\r\n                        template: \"Template:UserMessages/EditUserPage\",\r\n                        parameters: [\r\n                            { key: \"1\", label: \"页面名\" }\r\n                        ],\r\n                        summary: \"请勿编辑他人用户页面\"\r\n                    },\r\n                    {\r\n                        title: \"幽默模板\",\r\n                        template: \"Template:UserMessages/HumorTemplate\",\r\n                        parameters: [\r\n                            { key: \"1\", label: \"选填页面名\" },\r\n                            { key: \"2\", label: \"选填行为\" }\r\n                        ],\r\n                        summary: \"关于幽默模板的使用\"\r\n                    },\r\n                    {\r\n                        title: \"违规字词转换\",\r\n                        template: \"Template:UserMessages/ConversionViolation\",\r\n                        parameters: [\r\n                            { key: \"1\", label: \"选填页面名\" },\r\n                            { key: \"2\", label: \"选填行为\" }\r\n                        ],\r\n                        summary: \"关于您近期的编辑\"\r\n                    },\r\n                    {\r\n                        title: \"文件授权协议\",\r\n                        template: \"Template:UserMessages/FileLicense\",\r\n                        parameters: [\r\n                            { key: \"1\", label: \"文件名\" }\r\n                        ],\r\n                        summary: \"关于您近期上传的文件\"\r\n                    },\r\n                    {\r\n                        title: \"截图文件授权\",\r\n                        template: \"Template:UserMessages/FileLicense2\",\r\n                        parameters: [\r\n                            { key: \"1\", label: \"文件名\" }\r\n                        ],\r\n                        summary: \"关于您近期上传的截图文件\"\r\n                    },\r\n                    {\r\n                        title: \"用户文件\",\r\n                        template: \"Template:UserMessages/UserFile\",\r\n                        parameters: [],\r\n                        summary: \"关于您上传的文件\"\r\n                    },\r\n                    {\r\n                        title: \"修改历史发言\",\r\n                        template: \"Template:UserMessages/DiscussionViolation\",\r\n                        parameters: [\r\n                            { key: \"1\", label: \"选填页面名或差异\" }\r\n                        ],\r\n                        summary: \"关于您在讨论区的发言\"\r\n                    },\r\n                    {\r\n                        title: \"违反讨论区方针\",\r\n                        template: \"Template:UserMessages/DiscussionViolation2\",\r\n                        parameters: [\r\n                            { key: \"1\", label: \"页面名或差异\" },\r\n                            { key: \"2\", label: \"原因\" }\r\n                        ],\r\n                        summary: \"关于您在讨论区的发言\"\r\n                    },\r\n                    {\r\n                        title: \"删除历史发言\",\r\n                        template: \"Template:UserMessages/DiscussionViolation3\",\r\n                        parameters: [\r\n                            { key: \"1\", label: \"选填页面名或差异\" }\r\n                        ],\r\n                        summary: \"关于您在讨论区的行为\"\r\n                    },\r\n                    {\r\n                        title: \"人身攻击提醒\",\r\n                        template: \"Template:UserMessages/PersonalAttacks\",\r\n                        parameters: [\r\n                            { key: \"1\", label: \"页面名\" },\r\n                            { key: \"2\", label: \"选填用户\" }\r\n                        ],\r\n                        summary: \"请勿人身攻击\"\r\n                    },\r\n                    {\r\n                        title: \"人身攻击警告\",\r\n                        template: \"Template:UserMessages/PersonalAttacks2\",\r\n                        parameters: [],\r\n                        summary: \"人身攻击警告\"\r\n                    },\r\n                    {\r\n                        title: \"未签名\",\r\n                        template: \"Template:UserMessages/Signature\",\r\n                        parameters: [\r\n                            { key: \"1\", label: \"页面名\" }\r\n                        ],\r\n                        summary: \"关于您的签名\"\r\n                    },\r\n                    {\r\n                        title: \"签名违规\",\r\n                        template: \"Template:UserMessages/Signature2\",\r\n                        parameters: [\r\n                            { key: \"1\", label: \"页面名\" }\r\n                        ],\r\n                        summary: \"关于您的签名\"\r\n                    },\r\n                    {\r\n                        title: \"编辑战通知\",\r\n                        template: \"Template:UserMessages/EditWar\",\r\n                        parameters: [\r\n                            { key: \"1\", label: \"页面名\" }\r\n                        ],\r\n                        summary: \"提醒您参与讨论\"\r\n                    },\r\n                    {\r\n                        title: \"编辑战提醒\",\r\n                        template: \"Template:UserMessages/EditWar2\",\r\n                        parameters: [\r\n                            { key: \"1\", label: \"页面名\" }\r\n                        ],\r\n                        summary: \"编辑战提醒\"\r\n                    },\r\n                    {\r\n                        title: \"编辑战警告\",\r\n                        template: \"Template:UserMessages/EditWar3\",\r\n                        parameters: [\r\n                            { key: \"1\", label: \"页面名\" },\r\n                            { key: \"2\", label: \"选填原因\" }\r\n                        ],\r\n                        summary: \"编辑战警告\"\r\n                    },\r\n                    {\r\n                        title: \"最终警告\",\r\n                        template: \"Template:UserMessages/FinalWarning\",\r\n                        parameters: [\r\n                            { key: \"1\", label: \"选填原因\" },\r\n                            { key: \"2\", label: \"选填原因\" }\r\n                        ],\r\n                        summary: \"警告：忍耐是有限的\"\r\n                    },\r\n                    {\r\n                        title: \"大家族模板排序\",\r\n                        template: \"Template:UserMessages/NavSort\",\r\n                        parameters: [\r\n                            { key: \"1\", label: \"页面名\" }\r\n                        ],\r\n                        summary: \"关于大家族模板的排序\"\r\n                    },\r\n                    {\r\n                        title: \"回复无缩进\",\r\n                        template: \"Template:UserMessages/ReplyNoIndentation\",\r\n                        parameters: [\r\n                            { key: \"1\", label: \"页面名\" },\r\n                            { key: \"2\", label: \"被回复人\" }\r\n                        ],\r\n                        summary: \"关于您在讨论区的发言\"\r\n                    },\r\n                    {\r\n                        title: \"超速编辑\",\r\n                        template: \"Template:UserMessages/OverSpeedEdit\",\r\n                        parameters: [],\r\n                        summary: \"关于您近期的编辑\"\r\n                    }\r\n                ],\r\n\t\t\t\tprimaryAction: { label: \"预览\", actionType: \"progressive\" }\r\n\t\t\t};\r\n\t\t},\r\n\t\tcomputed: {\r\n\t\t\tmenuItems() {\r\n\t\t\t\treturn this.templates.map((item, index) => ({\r\n\t\t\t\t\tlabel: item.title,\r\n\t\t\t\t\tvalue: index\r\n\t\t\t\t}));\r\n\t\t\t},\r\n\t\t\tselectedTemplate() {\r\n\t\t\t\treturn (this.selected !== null && this.templates[this.selected]) || null;\r\n\t\t\t},\r\n\t\t\tpreviewActions() {\r\n\t\t\t\treturn {\r\n\t\t\t\t\tdefault: { label: \"关闭\" },\r\n\t\t\t\t\tprimary: { \r\n\t\t\t\t\t\tlabel: this.sending ? \"发送中...\" : \"发送提醒\", \r\n\t\t\t\t\t\tactionType: \"progressive\",\r\n\t\t\t\t\t\tdisabled: this.sending\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t},\r\n\t\twatch: {\r\n\t\t\tselected(newVal) {\r\n\t\t\t\tif (newVal !== null) {\r\n\t\t\t\t\tthis.editSummary = this.templates[newVal].summary;\r\n\t\t\t\t\tthis.parameterValues = {};\r\n\t\t\t\t\tthis.customMode = false;\r\n\t\t\t\t\tthis.customText = \"\";\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tasync customMode(newVal) {\r\n\t\t\t\tif (newVal && this.selectedTemplate) {\r\n\t\t\t\t\tawait this.loadTemplateSource(this.selectedTemplate.template);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\ttemplate: `\r\n\t\t\t<!-- 主对话框 -->\r\n\t\t\t<cdx-dialog\r\n\t\t\t\tv-model:open=\"showDialog\"\r\n\t\t\t\ttitle=\"向用户发送提醒\"\r\n\t\t\t\t:use-close-button=\"true\"\r\n\t\t\t\t:primary-action=\"primaryAction\"\r\n\t\t\t\t@primary=\"previewTemplate\"\r\n\t\t\t>\r\n\t\t\t\t<div class=\"umdev-dialog-content\">\r\n\t\t\t\t\t<cdx-field>\r\n\t\t\t\t\t\t<template #label>选择模板</template>\r\n\t\t\t\t\t\t<cdx-select\r\n\t\t\t\t\t\t\tv-model:selected=\"selected\"\r\n\t\t\t\t\t\t\t:menu-items=\"menuItems\"\r\n\t\t\t\t\t\t\tdefault-label=\"请选择模板\"\r\n\t\t\t\t\t\t></cdx-select>\r\n\t\t\t\t\t</cdx-field>\r\n\r\n\t\t\t\t\t<cdx-field v-if=\"selectedTemplate\">\r\n\t\t\t\t\t\t<cdx-checkbox v-model=\"customMode\">\r\n\t\t\t\t\t\t\t自定义内容\r\n\t\t\t\t\t\t</cdx-checkbox>\r\n\t\t\t\t\t</cdx-field>\r\n\r\n\t\t\t\t\t<cdx-field\r\n\t\t\t\t\t\tv-for=\"(param, index) in (selectedTemplate?.parameters || [])\"\r\n\t\t\t\t\t\t:key=\"index\"\r\n\t\t\t\t\t\tv-if=\"selectedTemplate && !customMode\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<template #label>{{ param.label }}</template>\r\n\t\t\t\t\t\t<cdx-text-input v-model=\"parameterValues[param.key]\"></cdx-text-input>\r\n\t\t\t\t\t</cdx-field>\r\n\r\n\t\t\t\t\t<cdx-field>\r\n\t\t\t\t\t\t<template #label>编辑摘要</template>\r\n\t\t\t\t\t\t<cdx-text-input v-model=\"editSummary\"></cdx-text-input>\r\n\t\t\t\t\t</cdx-field>\r\n\r\n\t\t\t\t\t<cdx-field v-if=\"customMode\">\r\n\t\t\t\t\t\t<template #label>自定义内容</template>\r\n\t\t\t\t\t\t<cdx-text-area\r\n\t\t\t\t\t\t\tv-model=\"customText\"\r\n\t\t\t\t\t\t\t:autosize=\"true\"\r\n\t\t\t\t\t\t\trows=\"6\"\r\n\t\t\t\t\t\t\tclass=\"umdev-textarea\"\r\n\t\t\t\t\t\t></cdx-text-area>\r\n\t\t\t\t\t\t<div v-if=\"loadingSource\">正在加载模板源代码...</div>\r\n\t\t\t\t\t</cdx-field>\r\n\t\t\t\t</div>\r\n\t\t\t</cdx-dialog>\r\n\r\n\t\t\t<cdx-dialog\r\n\t\t\t\tv-if=\"showPreview\"\r\n\t\t\t\tv-model:open=\"showPreview\"\r\n\t\t\t\ttitle=\"预览\"\r\n\t\t\t\t:use-close-button=\"true\"\r\n\t\t\t\t:default-action=\"previewActions.default\"\r\n\t\t\t\t:primary-action=\"previewActions.primary\"\r\n\t\t\t\t@default=\"showPreview = false\"\r\n\t\t\t\t@primary=\"sendToTalkPage\"\r\n\t\t\t>\r\n\t\t\t\t<div class=\"umdev-dialog-content\" v-html=\"previewHtml\"></div>\r\n\t\t\t</cdx-dialog>\r\n\t\t`,\r\n\t\tmethods: {\r\n            openDialog() {\r\n                this.showDialog = true;\r\n            },\r\n            async loadTemplateSource(title) {\r\n                this.loadingSource = true;\r\n                try {\r\n                    const data = await api.get({\r\n                        action: \"query\",\r\n                        prop: \"revisions\",\r\n                        rvprop: \"content\",\r\n                        titles: title,\r\n                        formatversion: 2\r\n                    });\r\n                    const page = data.query.pages[0];\r\n                    let content = page.revisions?.[0]?.content || \"\";\r\n\r\n                    content = content\r\n                        .replace(/<noinclude>[\\s\\S]*?<\\/noinclude>/gi, \"\")\r\n                        .replace(/<includeonly>[\\s\\S]*?<\\/includeonly>/gi, \"\")\r\n                        .replace(/<onlyinclude>|<\\/onlyinclude>/gi, \"\");\r\n\r\n                    this.customText = content.trim();\r\n                } catch (err) {\r\n                    this.customText = `加载模板源代码失败：${err}`;\r\n                } finally {\r\n                    this.loadingSource = false;\r\n                }\r\n            },\r\n            async previewTemplate() {\r\n                let wikitext = \"\";\r\n\r\n                if (this.customMode) {\r\n                    wikitext = this.customText;\r\n                } else {\r\n                    const tpl = this.selectedTemplate;\r\n                    if (!tpl) return;\r\n\r\n                    wikitext = `{{${tpl.template}`;\r\n                    if (tpl.parameters?.length) {\r\n                        tpl.parameters.forEach(param => {\r\n                            const val = this.parameterValues[param.key];\r\n                            if (val) wikitext += `|${param.key}=${val}`;\r\n                        });\r\n                    }\r\n                    wikitext += \"}}\";\r\n                }\r\n\r\n                this.previewWikitext = wikitext;\r\n\r\n                try {\r\n                    const res = await api.post({\r\n                        action: \"parse\",\r\n                        text: wikitext,\r\n                        contentmodel: \"wikitext\",\r\n                        format: \"json\"\r\n                    });\r\n                    this.previewHtml = res.parse.text[\"*\"];\r\n                    this.showPreview = true;\r\n                } catch (err) {\r\n                    this.previewHtml = `<div style=\"color:red;\">预览出错：${err}</div>`;\r\n                    this.showPreview = true;\r\n                }\r\n            },\r\n            async sendToTalkPage() {\r\n                const targetUser = mw.config.get(\"wgRelevantUserName\");\r\n                if (!targetUser) {\r\n                    mw.notify(\"无法获取目标用户名\", { type: \"error\" });\r\n                    return;\r\n                }\r\n\r\n                this.sending = true;\r\n                try {\r\n                    let wikitextToSend = this.previewWikitext;\r\n\r\n                    if (!this.customMode && this.selectedTemplate) {\r\n                        wikitextToSend = this.previewWikitext.replace(/^{{/, \"{{subst:\");\r\n                    }\r\n\r\n                    await api.postWithToken(\"csrf\", {\r\n                        action: \"edit\",\r\n                        assertuser: mw.config.get(\"wgUserName\"),\r\n                        format: \"json\",\r\n                        title: `User talk:${targetUser}`,\r\n                        section: \"new\",\r\n                        sectiontitle: \"\",\r\n                        text: `${wikitextToSend} ——~~~~`,\r\n                        summary: this.editSummary,\r\n                        tags: \"Automation tool|UserMessages\"\r\n                    });\r\n\r\n                    mw.notify(\"已成功发送到讨论页\", { type: \"success\" });\r\n                    this.showPreview = false;\r\n                    this.showDialog = false;\r\n                } catch (err) {\r\n                    mw.notify(`发送失败：${err}`, { type: \"error\" });\r\n                } finally {\r\n                    this.sending = false;\r\n                }\r\n            }\r\n        },\r\n\r\n\t\tmounted() {\r\n\t\t\tdialogTrigger.addEventListener(\"click\", this.openDialog);\r\n\t\t},\r\n\t\tunmounted() {\r\n\t\t\tdialogTrigger.removeEventListener(\"click\", this.openDialog);\r\n\t\t}\r\n\t})\r\n\t.component(\"cdx-dialog\", Codex.CdxDialog)\r\n\t.component(\"cdx-field\", Codex.CdxField)\r\n\t.component(\"cdx-text-input\", Codex.CdxTextInput)\r\n\t.component(\"cdx-text-area\", Codex.CdxTextArea)\r\n\t.component(\"cdx-select\", Codex.CdxSelect)\r\n\t.component(\"cdx-button\", Codex.CdxButton)\r\n\t.component(\"cdx-checkbox\", Codex.CdxCheckbox)\r\n\t.mount(mountPoint);\r\n});"],"names":["e","t","r","Symbol","n","iterator","o","toStringTag","i","c","prototype","Generator","u","Object","create","_regeneratorDefine2","f","p","y","G","v","a","d","bind","length","l","TypeError","call","done","value","GeneratorFunction","GeneratorFunctionPrototype","getPrototypeOf","setPrototypeOf","__proto__","displayName","_regenerator","w","m","defineProperty","_invoke","enumerable","configurable","writable","asyncGeneratorStep","Promise","resolve","then","_asyncToGenerator","arguments","apply","_next","_throw","dialogTrigger","mw","util","addPortletLink","loader","using","require","Vue","Codex","mountPoint","document","body","appendChild","createElement","api","Api","addCSS","createMwApp","data","showDialog","selected","editSummary","showPreview","previewHtml","previewWikitext","parameterValues","customMode","customText","loadingSource","sending","templates","title","template","parameters","summary","key","label","primaryAction","actionType","computed","menuItems","this","map","item","index","selectedTemplate","previewActions","default","primary","disabled","watch","newVal","_this","_callee","_context","loadTemplateSource","methods","openDialog","_this2","_callee2","_page$revisions","page","content","_t","_context2","get","action","prop","rvprop","titles","formatversion","query","pages","revisions","replace","trim","concat","previewTemplate","_this3","_callee3","wikitext","_tpl$parameters","tpl","res","_t2","_context3","forEach","param","val","post","text","contentmodel","format","parse","sendToTalkPage","_this4","_callee4","targetUser","wikitextToSend","_t3","_context4","config","notify","type","postWithToken","assertuser","section","sectiontitle","tags","mounted","addEventListener","unmounted","removeEventListener","component","CdxDialog","CdxField","CdxTextInput","CdxTextArea","CdxSelect","CdxButton","CdxCheckbox","mount"],"sourceRoot":""}