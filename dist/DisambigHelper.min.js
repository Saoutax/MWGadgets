(()=>{"use strict";function t(n){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(n)}function n(n){if(null!=n){var i=n["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],e=0;if(i)return i.call(n);if("function"==typeof n.next)return n;if(!isNaN(n.length))return{next:function(){return n&&e>=n.length&&(n=void 0),{value:n&&n[e++],done:!n}}}}throw new TypeError(t(n)+" is not iterable")}function i(){var t,n,o="function"==typeof Symbol?Symbol:{},M=o.iterator||"@@iterator",r=o.toStringTag||"@@toStringTag";function a(i,o,M,r){var a=o&&o.prototype instanceof z?o:z,N=Object.create(a.prototype);return e(N,"_invoke",function(i,e,o){var M,r,a,z=0,N=o||[],u=!1,j={p:0,n:0,v:t,a:g,f:g.bind(t,4),d:function(n,i){return M=n,r=0,a=t,j.n=i,c}};function g(i,e){for(r=i,a=e,n=0;!u&&z&&!o&&n<N.length;n++){var o,M=N[n],g=j.p,l=M[2];i>3?(o=l===e)&&(a=M[(r=M[4])?5:(r=3,3)],M[4]=M[5]=t):M[0]<=g&&((o=i<2&&g<M[1])?(r=0,j.v=e,j.n=M[1]):g<l&&(o=i<3||M[0]>e||e>l)&&(M[4]=i,M[5]=e,j.n=l,r=0))}if(o||i>1)return c;throw u=!0,e}return function(o,N,l){if(z>1)throw TypeError("Generator is already running");for(u&&1===N&&g(N,l),r=N,a=l;(n=r<2?t:a)||!u;){M||(r?r<3?(r>1&&(j.n=-1),g(r,a)):j.n=a:j.v=a);try{if(z=2,M){if(r||(o="next"),n=M[o]){if(!(n=n.call(M,a)))throw TypeError("iterator result is not an object");if(!n.done)return n;a=n.value,r<2&&(r=0)}else 1===r&&(n=M.return)&&n.call(M),r<2&&(a=TypeError("The iterator does not provide a '"+o+"' method"),r=1);M=t}else if((n=(u=j.n<0)?a:i.call(e,j))!==c)break}catch(n){M=t,r=1,a=n}finally{z=1}}return{value:n,done:u}}}(i,M,r),!0),N}var c={};function z(){}function N(){}function u(){}n=Object.getPrototypeOf;var j=[][M]?n(n([][M]())):(e(n={},M,function(){return this}),n),g=u.prototype=z.prototype=Object.create(j);function l(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,u):(t.__proto__=u,e(t,r,"GeneratorFunction")),t.prototype=Object.create(g),t}return N.prototype=u,e(g,"constructor",u),e(u,"constructor",N),N.displayName="GeneratorFunction",e(u,r,"GeneratorFunction"),e(g),e(g,r,"Generator"),e(g,M,function(){return this}),e(g,"toString",function(){return"[object Generator]"}),(i=function(){return{w:a,m:l}})()}function e(t,n,i,o){var M=Object.defineProperty;try{M({},"",{})}catch(t){M=0}e=function(t,n,i,o){function r(n,i){e(t,n,function(t){return this._invoke(n,i,t)})}n?M?M(t,n,{value:i,enumerable:!o,configurable:!o,writable:!o}):t[n]=i:(r("next",0),r("throw",1),r("return",2))},e(t,n,i,o)}function o(t,n){var i="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!i){if(Array.isArray(t)||(i=function(t,n){if(t){if("string"==typeof t)return M(t,n);var i={}.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?M(t,n):void 0}}(t))||n&&t&&"number"==typeof t.length){i&&(t=i);var e=0,o=function(){};return{s:o,n:function(){return e>=t.length?{done:!0}:{done:!1,value:t[e++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,a=!0,c=!1;return{s:function(){i=i.call(t)},n:function(){var t=i.next();return a=t.done,t},e:function(t){c=!0,r=t},f:function(){try{a||null==i.return||i.return()}finally{if(c)throw r}}}}function M(t,n){(null==n||n>t.length)&&(n=t.length);for(var i=0,e=Array(n);i<n;i++)e[i]=t[i];return e}function r(t,n,i,e,o,M,r){try{var a=t[M](r),c=a.value}catch(t){return void i(t)}a.done?n(c):Promise.resolve(c).then(e,o)}function a(t){return function(){var n=this,i=arguments;return new Promise(function(e,o){var M=t.apply(n,i);function a(t){r(M,e,o,a,c,"next",t)}function c(t){r(M,e,o,a,c,"throw",t)}a(void 0)})}}$(function(){if(mw.config.get("wgIsArticle")&&"wikitext"===mw.config.get("wgPageContentModel")){var t={loading:"加载中...",loadingFailed:"( ﾟ∀。)加载失败",editing:"修改中...",edited:"修改成功！正在刷新页面...",editFailed:"( ﾟ∀。)修改失败",disambig:"消歧义"};if("zh-hant"===mw.config.get().wgUserLanguage)t.loading="加載中...",t.loadingFailed="( ﾟ∀。)加載失敗",t.editing="修改中...",t.edited="修改成功！正在刷新頁面...",t.editFailed="( ﾟ∀。)修改失敗",t.disambig="消歧義";$("body").append("<style>\n    a.mw-disambig.mw-disambig { color: #ff8921; }\n    a.mw-disambig.mw-disambig:visited { color: #d2711b; }\n    a.mw-redirect.mw-disambig { color: #ff6421; }\n    a.mw-redirect.mw-disambig:visited { color: #d2521b; }\n    div.disambig-box {\n      width: 200px;\n      max-height: 220px;\n      overflow-y: scroll;\n      border-radius: 2px;\n      box-shadow: rgba(0, 0, 0, 0.156863) 0px 3px 10px, rgba(0, 0, 0, 0.227451) 0px 3px 10px;\n      -webkit-box-shadow: rgba(0, 0, 0, 0.156863) 0px 3px 10px, rgba(0, 0, 0, 0.227451) 0px 3px 10px;\n      margin: 0;\n      padding: 0;\n      color: #000;\n      background: #FFF;\n      position: absolute;\n      font-size: 14px;\n      font-style: normal;\n      font-weight: normal;\n      text-decoration: none;\n      text-align: left;\n      display: none;\n      transition: all 500ms cubic-bezier(.23, 1, .32, 1) 0ms;\n      z-index: 999;\n    }\n    .disambig-box ul.disambig-ul {\n      list-style: none;\n      padding: 0 !important;\n      margin: 0 !important;\n    }\n    .disambig-box li {\n      color: #000 !important;\n      padding: 2px 10px;\n      transition: all 500ms cubic-bezier(.23, 1, .32, 1) 0ms;\n    }\n    .disambig-box li:hover { background: #F0F0F0; }\n    .disambig-box li a { text-decoration: none; }\n    .icon {\n      margin-left: 5px;\n      width: 20px;\n      opacity: .7;\n      transition: all 500ms cubic-bezier(.23, 1, .32, 1) 0ms;\n    }\n    .icon:hover { opacity: 1; }\n    </style>");var e,M=function(t){return decodeURI($(t).attr("href").substring(1)).replace("%2F","/")},r=function(t){return new Promise(function(n){(new mw.Api).get({action:"parse",page:t,redirects:!0,prop:"wikitext",format:"json"}).done(function(t){n(t.parse.wikitext["*"])}).fail(function(t,i,e){n(e)})})},c=(e={},$(".mw-disambig").each(function(){var t=M(this);e[t]=e[t]+1||0}),e);$(".mw-disambig").each(a(i().m(function e(){var z,N,u,j,g,l,s=this;return i().w(function(e){for(;;)switch(e.n){case 0:z=M(this),N=$(this).text(),u=z.split(".").join(""),(j=$("#".concat(u)).length)>0&&(u=u+j+1),g=0===c[z]?'<img class="icon" alt="edit" src="data:image/svg+xml;base64,PHN2ZyB0PSIxNjMyMTExNDY4NTg2IiBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHAtaWQ9IjMzNTciIHdpZHRoPSIyMDAiIGhlaWdodD0iMjAwIj48cGF0aCBkPSJNODI3LjczMzMzMyAzMTMuMTczMzMzTDcxMC44MjY2NjcgMTk2LjI2NjY2N0E4NS4zMzMzMzMgODUuMzMzMzMzIDAgMCAwIDU5Ny4zMzMzMzMgMTkzLjI4bC0zODQgMzg0YTg1LjMzMzMzMyA4NS4zMzMzMzMgMCAwIDAtMjQuMzIgNTEuNjI2NjY3TDE3MC42NjY2NjcgODA2LjgyNjY2N2E0Mi42NjY2NjcgNDIuNjY2NjY3IDAgMCAwIDEyLjM3MzMzMyAzNC4xMzMzMzNBNDIuNjY2NjY3IDQyLjY2NjY2NyAwIDAgMCAyMTMuMzMzMzMzIDg1My4zMzMzMzNoMy44NGwxNzcuOTItMTYuMjEzMzMzYTg1LjMzMzMzMyA4NS4zMzMzMzMgMCAwIDAgNTEuNjI2NjY3LTI0LjMybDM4NC0zODRhODEuOTIgODEuOTIgMCAwIDAtMi45ODY2NjctMTE1LjYyNjY2N3pNNjgyLjY2NjY2NyA0NTUuNjhMNTY4LjMyIDM0MS4zMzMzMzNsODMuMi04NS4zMzMzMzNMNzY4IDM3Mi40OHoiIHAtaWQ9IjMzNTgiPjwvcGF0aD48L3N2Zz4=">':'<img class="icon" alt="edit_all" src="data:image/svg+xml;base64,PHN2ZyB0PSIxNjMyMTExNDY4NTg2IiBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHAtaWQ9IjMzNTciIHdpZHRoPSIyMDAiIGhlaWdodD0iMjAwIj48cGF0aCBkPSJNODI3LjczMzMzMyAzMTMuMTczMzMzTDcxMC44MjY2NjcgMTk2LjI2NjY2N0E4NS4zMzMzMzMgODUuMzMzMzMzIDAgMCAwIDU5Ny4zMzMzMzMgMTkzLjI4bC0zODQgMzg0YTg1LjMzMzMzMyA4NS4zMzMzMzMgMCAwIDAtMjQuMzIgNTEuNjI2NjY3TDE3MC42NjY2NjcgODA2LjgyNjY2N2E0Mi42NjY2NjcgNDIuNjY2NjY3IDAgMCAwIDEyLjM3MzMzMyAzNC4xMzMzMzNBNDIuNjY2NjY3IDQyLjY2NjY2NyAwIDAgMCAyMTMuMzMzMzMzIDg1My4zMzMzMzNoMy44NGwxNzcuOTItMTYuMjEzMzMzYTg1LjMzMzMzMyA4NS4zMzMzMzMgMCAwIDAgNTEuNjI2NjY3LTI0LjMybDM4NC0zODRhODEuOTIgODEuOTIgMCAwIDAtMi45ODY2NjctMTE1LjYyNjY2N3pNNjgyLjY2NjY2NyA0NTUuNjhMNTY4LjMyIDM0MS4zMzMzMzNsODMuMi04NS4zMzMzMzNMNzY4IDM3Mi40OHoiIHAtaWQ9IjMzNTgiIGZpbGw9IiNkODFlMDYiPjwvcGF0aD48L3N2Zz4=">',l=function(t){$("#".concat(u," ul")).empty().append("<li>".concat(t,"</li>"))},$(this).after($("<div>",{id:u,class:"disambig-box"}).on("mouseleave",function(){$("#".concat(u)).hide(150,"swing")}).append('<ul class="disambig-ul">'),$("<sup>").append($("<a>",{href:"javascript:void(0)",text:"?",class:u}))),$("a.".concat(u)).on("mouseenter",a(i().m(function e(){var M,c,j,d,y;return i().w(function(e){for(;;)switch(e.p=e.n){case 0:return $("#".concat(u)).css({left:$(s).position().left+10,top:$(s).position().top+16}),l(t.loading),$("#".concat(u)).show(150,"swing"),e.n=1,r(z);case 1:if(M=(M=e.v).split("\n").map(function(t){return t.substring(0,t.indexOf("——"))}).map(function(t){return t.match(/\[\[/g)&&!t.match(/\[\[File:/gi)?t.split("[[")[1].split("]]")[0]:t.match(/\{\{(dis|dl)\|/gi)?t.split(/\{\{(dis|dl)\|/gi)[1]:t.match(/\{\{coloredlink\|/gi)?t.split(/\{\{coloredlink\|/gi)[1]:void 0}).filter(function(t){return t}).map(function(t){return t.split("|")[0]}),$("#".concat(u," ul")).empty(),M[0]){e.n=2;break}return e.a(2,l(t.loadingFailed));case 2:c=o(M),e.p=3,d=i().m(function n(){var e,o;return i().w(function(n){for(;;)switch(n.n){case 0:e=j.value,o=e.replace('"',"&quot;"),$("#".concat(u," ul")).append('<li id="'.concat(o,'">').concat(e,'<a href="/').concat(o,'">').concat('<img class="icon" alt="link" src="data:image/svg+xml;base64,PHN2ZyB0PSIxNjMyMTExNzE4MDc5IiBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHAtaWQ9IjM1NjgiIHdpZHRoPSIyMDAiIGhlaWdodD0iMjAwIj48cGF0aCBkPSJNMzQxLjMzMzMzMyA1MTJhNDIuNjY2NjY3IDQyLjY2NjY2NyAwIDAgMCA0Mi42NjY2NjcgNDIuNjY2NjY3aDI1NmE0Mi42NjY2NjcgNDIuNjY2NjY3IDAgMCAwIDAtODUuMzMzMzM0SDM4NGE0Mi42NjY2NjcgNDIuNjY2NjY3IDAgMCAwLTQyLjY2NjY2NyA0Mi42NjY2Njd6IiBwLWlkPSIzNTY5Ij48L3BhdGg+PHBhdGggZD0iTTM4NCA2ODIuNjY2NjY3SDMwNy42MjY2NjdBMTc2LjIxMzMzMyAxNzYuMjEzMzMzIDAgMCAxIDEyOCA1MjcuNzg2NjY3IDE3MC42NjY2NjcgMTcwLjY2NjY2NyAwIDAgMSAyOTguNjY2NjY3IDM0MS4zMzMzMzNoODUuMzMzMzMzYTQyLjY2NjY2NyA0Mi42NjY2NjcgMCAwIDAgMC04NS4zMzMzMzNIMzA3LjYyNjY2N2EyNjIuNCAyNjIuNCAwIDAgMC0yNjIuODI2NjY3IDIyMi4yOTMzMzNBMjU2IDI1NiAwIDAgMCAyOTguNjY2NjY3IDc2OGg4NS4zMzMzMzNhNDIuNjY2NjY3IDQyLjY2NjY2NyAwIDAgMCAwLTg1LjMzMzMzM3pNOTgxLjMzMzMzMyA0NzkuNTczMzMzQTI2Mi44MjY2NjcgMjYyLjgyNjY2NyAwIDAgMCA3MTUuMDkzMzMzIDI1NmgtNjQuNDI2NjY2QzYxNi4xMDY2NjcgMjU2IDU5Ny4zMzMzMzMgMjc1LjIgNTk3LjMzMzMzMyAyOTguNjY2NjY3YTQyLjY2NjY2NyA0Mi42NjY2NjcgMCAwIDAgNDIuNjY2NjY3IDQyLjY2NjY2Nmg3Ni4zNzMzMzNBMTc2LjIxMzMzMyAxNzYuMjEzMzMzIDAgMCAxIDg5NiA0OTYuMjEzMzMzIDE3MC42NjY2NjcgMTcwLjY2NjY2NyAwIDAgMSA3MjUuMzMzMzMzIDY4Mi42NjY2NjdoLTg1LjMzMzMzM2E0Mi42NjY2NjcgNDIuNjY2NjY3IDAgMCAwIDAgODUuMzMzMzMzaDg1LjMzMzMzM2EyNTYgMjU2IDAgMCAwIDI1Ni0yODguNDI2NjY3eiIgcC1pZD0iMzU3MCI+PC9wYXRoPjwvc3ZnPg==">',"</a><a>").concat(g,"</a></li>")),document.getElementById(e).lastChild.addEventListener("click",a(i().m(function n(){var o,M,a;return i().w(function(n){for(;;)switch(n.n){case 0:return l(t.editing),o=mw.config.get().wgPageName,n.n=1,r(o);case 1:M=n.v,a="[[".concat(z,"]]"),z!==N&&(a="[[".concat(z,"|").concat(N,"]]")),(new mw.Api).postWithToken("csrf",{action:"edit",text:M.replaceAll(a,"[[".concat(e,"|").concat(N,"]]")),title:o,minor:!0,nocreate:!0,summary:"".concat(t.disambig,"：[[").concat(z,"]]→[[").concat(e,"]]"),tags:"Automation tool",errorformat:"plaintext"}).done(function(n){l(t.edited),window.location.reload()}).fail(function(n,i,e){l("".concat(t.editFailed,"（").concat(e,"）"))});case 2:return n.a(2)}},n)})));case 1:return n.a(2)}},n)}),c.s();case 4:if((j=c.n()).done){e.n=6;break}return e.d(n(d()),5);case 5:e.n=4;break;case 6:e.n=8;break;case 7:e.p=7,y=e.v,c.e(y);case 8:return e.p=8,c.f(),e.f(8);case 9:return e.a(2)}},e,null,[[3,7,8,9]])})));case 1:return e.a(2)}},e,this)})))}})})();
//# sourceMappingURL=DisambigHelper.min.js.map