(()=>{"use strict";var e=mw.config.get("wgNamespaceNumber"),t=mw.config.get("wgTitle"),n=mw.config.get("wgPageName"),o=mw.config.get("wgUserName");if(2===e&&(t.startsWith(o+"/")||t===o)){$(mw.util.addPortletLink("p-cactions","#","清空页面","clear-userpage","清空页面","r")).on("click",function(e){e.preventDefault();var t=new OO.ui.MessageDialog,o=new OO.ui.WindowManager;$("body").append(o.$element),o.addWindows([t]),o.openWindow(t,{title:"确认清空页面",message:"您确定要清空当前页面吗？",actions:[{action:"confirm",label:"确认",flags:["primary","destructive"]},{action:"cancel",label:"取消",flags:"safe"}]}).closed.then(function(e){e&&"confirm"===e.action&&(new mw.Api).postWithToken("csrf",{format:"json",action:"edit",watchlist:"nochange",tags:"Automation tool",title:n,text:"",summary:"清空页面"}).done(function(){mw.notify("清空完毕，即将刷新……",{type:"success"}),setTimeout(function(){location.reload()},2e3)}).fail(function(e){var t=e.error?e.error.info:e;mw.notify("清空页面时出现错误："+t,{type:"error"})}),o.destroy()})})}})();
//# sourceMappingURL=CleanUserpage.min.js.map