(()=>{"use strict";function t(t){return function(t){if(Array.isArray(t))return r(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return r(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(t,r){(null==r||r>t.length)&&(r=t.length);for(var e=0,n=Array(r);e<r;e++)n[e]=t[e];return n}$(function(){if(-1!==mw.config.get("wgNamespaceNumber")&&($(".moe-img-error").length>0||$(".moe-img-blocked").length>0)){var r=mw.config.get("wgPageName").replace(/_/g," ");(new mw.Api).post({action:"query",prop:"revisions",rvprop:"content",titles:r,formatversion:2}).then(function(r){var e,n=(null===(e=r.query.pages[0].revisions)||void 0===e||null===(e=e[0])||void 0===e?void 0:e.content)||"";$(".moe-img-error, .moe-img-blocked").each(function(r){var e,o=$(this),a=o.is("a"),i=a?o.attr("href"):o.attr("data-src-input"),l=new RegExp("<img[^>]*src=[\"']".concat(i.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"[\"'][^>]*>"),"gi"),c=(null===(e=t(n.matchAll(l))[r])||void 0===e?void 0:e[0])||null,s="";if(c){var u=c.match(/style=["']([^"']+)["']/i);s=(null==u?void 0:u[1])||""}var m=new Image;m.onload=function(){if(s&&$(this).attr("style",s),a){var t=$("<a>").attr({href:i,target:o.attr("target")||"_blank",rel:o.attr("rel")||"noopener noreferrer",class:o.attr("class")||"",title:o.attr("title")||""}).append(this);o.replaceWith(t)}else o.replaceWith(this)},m.src=i,m.alt=i})})}})})();
//# sourceMappingURL=ExtImgRestore.min.js.map