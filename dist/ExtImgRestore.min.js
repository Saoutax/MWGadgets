(()=>{"use strict";$(function(){if(-1!==mw.config.get("wgNamespaceNumber")&&$(".moe-img-error").length){var e=mw.config.get("wgPageName").replace(/_/g," ");(new mw.Api).post({action:"query",prop:"revisions",rvprop:"content",titles:e,formatversion:2}).then(function(e){var t,r=(null===(t=e.query.pages[0].revisions)||void 0===t||null===(t=t[0])||void 0===t?void 0:t.content)||"";$(".moe-img-error").toArray().forEach(function(e,t){var o,i=$(e),n=i.attr("data-src-input"),a=new RegExp("<img[^>]*src=[\"']".concat(n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"[\"'][^>]*>"),"gi"),c=null===(o=Array.from(r.matchAll(a))[t])||void 0===o?void 0:o[0],l="",s="";if(c){var g=c.match(/style=["']([^"']+)["']/i);l=(null==g?void 0:g[1])||"";var m=c.match(/title=["']([^"']+)["']/i);s=(null==m?void 0:m[1])||""}var v=new Image;v.onload=function(){l&&(v.style.cssText=l),v.title=s?"「ExtImgRestore」".concat(s):"ExtImgRestore",i.replaceWith(v)},v.src=n,v.alt=n})})}})})();
//# sourceMappingURL=ExtImgRestore.min.js.map