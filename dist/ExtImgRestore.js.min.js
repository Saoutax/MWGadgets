(()=>{"use strict";$(function(){if(-1!==mw.config.get("wgNamespaceNumber")&&!["submit","edit"].includes(mw.config.get("wgAction"))&&$(".moe-img-error").length){var e=mw.config.get("wgPageName").replace(/_/g," ");(new mw.Api).post({action:"query",prop:"revisions",rvprop:"content",titles:e,formatversion:2}).then(function(e){var t,i=(null===(t=e.query.pages[0].revisions)||void 0===t||null===(t=t[0])||void 0===t?void 0:t.content)||"";$(".moe-img-error").toArray().forEach(function(e,t){var o,r=$(e),n=r.attr("data-src-input"),a=new RegExp("<img[^>]*src=[\"']".concat(n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"[\"'][^>]*>"),"gi"),c=null===(o=Array.from(i.matchAll(a))[t])||void 0===o?void 0:o[0],l="",g="";if(c){var s=c.match(/style=["']([^"']+)["']/i);l=(null==s?void 0:s[1])||"";var m=c.match(/title=["']([^"']+)["']/i);g=(null==m?void 0:m[1])||""}var v=new Image;v.onload=function(){l&&(v.style.cssText=l),v.title=g?"「ExtImgRestore」".concat(g):"ExtImgRestore",r.replaceWith(v)},v.src=n,v.alt=n})})}})})();
//# sourceMappingURL=ExtImgRestore.js.min.js.map