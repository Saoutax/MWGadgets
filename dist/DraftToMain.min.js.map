{"version":3,"file":"DraftToMain.min.js","mappings":"mBAA2C,IAAvCA,GAAGC,OAAOC,IAAI,sBACdC,EAAEH,GAAGI,KAAKC,eAAe,aAAc,IAAK,OAAQ,eAAgB,OAAQ,MAAMC,GAAG,QAAS,WAC1F,IAAIC,EAAgBP,GAAGC,OAAOC,IAAI,cAC9BM,EAAaD,EAAcE,YAAY,KAE3C,IAAoB,IAAhBD,EAAJ,CAKA,IAAIE,EAAWH,EAAcI,UAAUH,EAAa,IAEpD,IAAIR,GAAGY,KAAMC,cAAc,OAAQ,CAC/BC,OAAQ,OACRC,KAAMR,EACNS,GAAIN,EACJO,OAAQ,OACRC,SAAU,UACVC,YAAY,EACZC,KAAM,kBACNC,OAAQ,SAEXC,KAAK,WACFtB,GAAGuB,OAAO,kBACVC,WAAW,WACPC,OAAOC,SAASC,KAAO3B,GAAGI,KAAKwB,OAAOlB,EAC1C,EAAG,IACP,GACCmB,KAAK,SAAUC,GACR9B,GAAGuB,OAAO,WAAaO,EAAM,IACjC,EAtBJ,MAFI9B,GAAGuB,OAAO,SAyBlB,E","sources":["webpack://mwgadgets/./src/DraftToMain/index.js"],"sourcesContent":["if (mw.config.get(\"wgNamespaceNumber\") === 2) { \n    $(mw.util.addPortletLink(\"p-cactions\", \"#\", \"快速转正\", \"move-to-main\", \"快速转正\", \"q\")).on(\"click\", function () {\n        var userPageTitle = mw.config.get(\"wgPageName\");\n        var slashIndex = userPageTitle.lastIndexOf(\"/\");\n\n        if (slashIndex === -1) {\n            mw.notify(\"标题获取失败\");\n            return;\n        }\n\n        var newTitle = userPageTitle.substring(slashIndex + 1);\n\n        new mw.Api().postWithToken(\"csrf\", {\n            action: \"move\",\n            from: userPageTitle,\n            to: newTitle,\n            reason: \"编写完成\",\n            movetalk: \"noleave\",\n            noredirect: true,\n            tags: \"Automation tool\",\n            format: \"json\"\n        })\n        .done(function () {\n            mw.notify(\"页面已成功移动，即将跳转……\");\n            setTimeout(function () {\n                window.location.href = mw.util.getUrl(newTitle);\n            }, 2000);\n        })\n        .fail(function (err) {\n                mw.notify(\"移动时出现错误：\" + err + \"。\");\n            })\n    });\n}"],"names":["mw","config","get","$","util","addPortletLink","on","userPageTitle","slashIndex","lastIndexOf","newTitle","substring","Api","postWithToken","action","from","to","reason","movetalk","noredirect","tags","format","done","notify","setTimeout","window","location","href","getUrl","fail","err"],"sourceRoot":""}