{"version":3,"file":"DraftToMain.min.js","mappings":"mBAA2C,IAAvCA,GAAGC,OAAOC,IAAI,sBACdC,EAAEH,GAAGI,KAAKC,eAAe,aAAc,IAAK,OAAQ,eAAgB,OAAQ,MAAMC,GAAG,QAAS,WAC1F,IAAIC,EAAgBP,GAAGC,OAAOC,IAAI,cAC9BM,EAAaD,EAAcE,YAAY,KAE3C,IAAoB,IAAhBD,EAAJ,CAKA,IAAIE,EAAWH,EAAcI,UAAUH,EAAa,IAEpD,IAAIR,GAAGY,KAAMC,cAAc,OAAQ,CAC/BC,OAAQ,OACRC,KAAMR,EACNS,GAAIN,EACJO,OAAQ,OACRC,SAAU,UACVC,YAAY,EACZC,KAAM,kBACNC,OAAQ,SAEXC,KAAK,WACFtB,GAAGuB,OAAO,kBACVC,WAAW,WACPC,OAAOC,SAASC,KAAO3B,GAAGI,KAAKwB,OAAOlB,EAC1C,EAAG,IACP,GACCmB,KAAK,SAAUC,GACR9B,GAAGuB,OAAO,WAAaO,EAAM,IACjC,EAtBJ,MAFI9B,GAAGuB,OAAO,SAyBlB,E","sources":["webpack://mwgadgets/./src/DraftToMain/index.js"],"sourcesContent":["if (mw.config.get(\"wgNamespaceNumber\") === 2) { \r\n    $(mw.util.addPortletLink(\"p-cactions\", \"#\", \"快速转正\", \"move-to-main\", \"快速转正\", \"q\")).on(\"click\", function () {\r\n        var userPageTitle = mw.config.get(\"wgPageName\");\r\n        var slashIndex = userPageTitle.lastIndexOf(\"/\");\r\n\r\n        if (slashIndex === -1) {\r\n            mw.notify(\"标题获取失败\");\r\n            return;\r\n        }\r\n\r\n        var newTitle = userPageTitle.substring(slashIndex + 1);\r\n\r\n        new mw.Api().postWithToken(\"csrf\", {\r\n            action: \"move\",\r\n            from: userPageTitle,\r\n            to: newTitle,\r\n            reason: \"编写完成\",\r\n            movetalk: \"noleave\",\r\n            noredirect: true,\r\n            tags: \"Automation tool\",\r\n            format: \"json\"\r\n        })\r\n        .done(function () {\r\n            mw.notify(\"页面已成功移动，即将跳转……\");\r\n            setTimeout(function () {\r\n                window.location.href = mw.util.getUrl(newTitle);\r\n            }, 2000);\r\n        })\r\n        .fail(function (err) {\r\n                mw.notify(\"移动时出现错误：\" + err + \"。\");\r\n            })\r\n    });\r\n}"],"names":["mw","config","get","$","util","addPortletLink","on","userPageTitle","slashIndex","lastIndexOf","newTitle","substring","Api","postWithToken","action","from","to","reason","movetalk","noredirect","tags","format","done","notify","setTimeout","window","location","href","getUrl","fail","err"],"sourceRoot":""}